#!/usr/bin/env bash
# Configures UFW firewall to allow SSH (22), HTTP (80), HTTPS (443) and deny all else.

# Install UFW (if not already installed)
sudo apt-get update -y
sudo apt-get install -y ufw

# Enable IPv6 support
sudo sed -i "s/IPV6=no/IPV6=yes/" /etc/default/ufw

# Set default policies
sudo ufw default deny incoming
sudo ufw default allow outgoing

# Allow necessary ports
sudo ufw allow 22/tcp   # SSH
sudo ufw allow 80/tcp   # HTTP
sudo ufw allow 443/tcp  # HTTPS

# Enable UFW (non-interactively)
echo "y" | sudo ufw enable

# Display status (for debugging)
sudo ufw status verbose